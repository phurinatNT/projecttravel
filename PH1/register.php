<?php require 'includes/db.php'; require 'includes/functions.php'; $msg=''; if($_SERVER['REQUEST_METHOD']==='POST'){ $username=trim($_POST['username']); $password=$_POST['password']; if($username===''||$password==='') $msg='กรุณากรอกข้อมูลให้ครบ'; else{ $hash=password_hash($password,PASSWORD_DEFAULT); $stmt=$conn->prepare('INSERT INTO users (username,password,role) VALUES (?,?,"member")'); $stmt->bind_param('ss',$username,$hash); if($stmt->execute()) $msg='สมัครสมาชิกสำเร็จ'; else $msg='ผิดพลาด: '.$conn->error; } } require 'includes/header.php'; ?>
<div class="card" style="max-width:520px;margin:18px auto"><h3>สมัครสมาชิก</h3><?php if($msg) echo '<p>'.e($msg).'</p>'; ?><form method="post"><input name="username" required placeholder="ชื่อผู้ใช้"><br><br><input type="password" name="password" required placeholder="รหัสผ่าน"><br><br><button class="btn" type="submit">สมัครสมาชิก</button></form></div><?php require 'includes/footer.php'; ?>